<!-- <mat-toolbar color="accent" fxLayoutAlign="center center">
  Movies {{ selected }}
</mat-toolbar> -->

<div fxLayout="row" fxLayout.lt-sm="column" fxLayoutAlign="end center">
    <!-- <div fxLayout="row" fxLayoutGap.gt-xs="15px" fxLayoutAlign.gt-sm="end center" fxLayoutAlign="center center" style="padding-top: 8px;"> -->

  <div fxLayoutAlign="center center">
    <mat-card>

      <form [formGroup]="searchMovieForm" (ngSubmit)="searchMovies()">

        <mat-form-field appearance="outline">
          <mat-label>Search movies</mat-label>
          <input matInput placeholder="Have a movie in mind?" formControlName="searchQuery">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>

      </form>

    </mat-card>
  </div>

  <div fxLayoutAlign="center center">
    <mat-card>
      <mat-form-field>

        <!-- <mat-label>Select movie times</mat-label> -->
        <mat-label>Search movies by:</mat-label>

        <mat-select [(value)]="selected">
          <mat-option value="now playing" (click)="searchMoviesNowPlaying()">
            <!-- <mat-icon>new_releases</mat-icon>Now playing -->
            Now playing
          </mat-option>
          <mat-option value="coming soon" (click)="searchMoviesUpcoming()">
            <!-- <mat-icon>date_range</mat-icon>Coming soon -->
            Coming soon
          </mat-option>
          <mat-option value="most popular" (click)="searchMoviesMostPopular()">
            <!-- <mat-icon>date_range</mat-icon>Coming soon -->
            Most popular
          </mat-option>
        </mat-select>

      </mat-form-field>

    </mat-card>
  </div>

</div>

<div fxLayoutAlign="center center">
  <h2>Movies {{ selected }}</h2>
</div>

<div *ngIf="searching" fxLayoutAlign="center center" style="padding-top: 150px;">
  <mat-spinner color="accent"></mat-spinner>
</div>

<div *ngIf="foundMoviesNowPlaying" fxLayout="row wrap" fxLayoutAlign="center center" style="padding: 12px 12px;">

  <div *ngFor="let foundMovieNowPlaying of foundMoviesNowPlaying; let i = index" style="padding: 8px 8px">

    <mat-card style="width: 300px;" fxLayout="column" fxLayoutAlign="center center">
      <mat-card-header>
        <mat-card-title style="text-align: center;">
          {{ foundMovieNowPlaying.original_title }}
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>

        <a *ngIf="foundMoviesNowPlaying[i]" (click)="openPoster()" fxLayoutAlign="center center">
          <img src="{{ foundMoviesNowPlayingImages[i] }}">
        </a>

        <mat-icon *ngIf="foundMoviesNowPlayingImages[i] == null">theaters</mat-icon>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <h3>Overview:</h3>
          {{ foundMovieNowPlaying.overview }}
          <h3>Rating: {{ foundMovieNowPlaying.vote_average }}</h3>
        </mat-expansion-panel>
      </mat-card-content>

    </mat-card>

  </div>

</div>

<div *ngIf="foundMoviesUpcoming" fxLayout="row wrap" fxLayoutAlign="center center" style="padding: 15px 15px;">

  <div *ngFor="let foundMovieUpcoming of foundMoviesUpcoming; let i = index" style="padding: 8px 8px">

    <mat-card style="width: 300px;" fxLayout="column" fxLayoutAlign="center center">
      <mat-card-header>
        <mat-card-title style="text-align: center;">
          {{ foundMovieUpcoming.original_title }}
        </mat-card-title>
        <mat-card-subtitle fxLayoutAlign="center center">
          Out: {{ foundMovieUpcoming.release_date | date:'mediumDate' }} <mat-icon>event</mat-icon>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>

        <a *ngIf="foundMoviesUpcomingImages[i] !== 'noImage'" href="" fxLayoutAlign="center center">
          <img src="{{ foundMoviesUpcomingImages[i] }}">
        </a>

        <div *ngIf="foundMoviesUpcomingImages[i] == 'noImage'" fxLayout="column" fxLayoutAlign="center center"
          style="padding: 25px 0px;">
          <mat-icon>theaters</mat-icon>
          (Image not available)
        </div>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          {{ foundMovieUpcoming.overview }}
          <h3>Rating: {{ foundMovieUpcoming.vote_average }}</h3>
        </mat-expansion-panel>

      </mat-card-content>

    </mat-card>

  </div>

</div>

<div *ngIf="foundMoviesMostPopular" fxLayout="row wrap" fxLayoutAlign="center center" style="padding: 15px 15px;">

  <div *ngFor="let foundMovieMostPopular of foundMoviesMostPopular; let i = index" style="padding: 8px 8px">

    <mat-card style="width: 300px;" fxLayout="column" fxLayoutAlign="center center">
      <mat-card-header>
        <mat-card-title style="text-align: center;">
          {{ foundMovieMostPopular.original_title }}
        </mat-card-title>
        <mat-card-subtitle fxLayoutAlign="center center">
          Out: <mat-icon>event</mat-icon>{{ foundMovieMostPopular.release_date | date:'mediumDate' }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>

        <a *ngIf="foundMoviesMostPopularImages[i] !== 'noImage'" href="" fxLayoutAlign="center center">
          <img src="{{ foundMoviesMostPopularImages[i] }}">
        </a>

        <div *ngIf="foundMoviesMostPopularImages[i] == 'noImage'" fxLayout="column" fxLayoutAlign="center center"
          style="padding: 25px 0px;">
          <mat-icon>theaters</mat-icon>
          (Image not available)
        </div>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          {{ foundMovieMostPopular.overview }}
          <h3>Rating: {{ foundMovieMostPopular.vote_average }}</h3>
        </mat-expansion-panel>

      </mat-card-content>

    </mat-card>

  </div>

</div>

<h2 fxLayoutAlign="center center">Search results for "{{ searchMovieForm.get('searchQuery').value }}"</h2>

<div *ngIf="foundMoviesSearch" fxLayout="row wrap" fxLayoutAlign="center center" style="padding: 15px 15px;">

  <div *ngFor="let foundMovieSearch of foundMoviesSearch; let i = index" style="padding: 8px 8px">

    <mat-card style="width: 300px;" fxLayout="column" fxLayoutAlign="center center">
      <mat-card-header>
        <mat-card-title style="text-align: center;">
          {{ foundMovieSearch.original_title }}
        </mat-card-title>
        <mat-card-subtitle fxLayoutAlign="center center">
          Out: <mat-icon>event</mat-icon>{{ foundMovieSearch.release_date | date:'mediumDate' }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>

        <a *ngIf="foundMoviesSearchImages[i] !== 'noImage'" href="" fxLayoutAlign="center center">
          <img src="{{ foundMoviesSearchImages[i] }}">
        </a>

        <div *ngIf="foundMoviesSearchImages[i] == 'noImage'" fxLayout="column" fxLayoutAlign="center center"
          style="padding: 25px 0px;">
          <mat-icon>theaters</mat-icon>
          (Image not available)
        </div>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Details
            </mat-panel-title>
          </mat-expansion-panel-header>
          {{ foundMovieSearch.overview }}
        </mat-expansion-panel>

      </mat-card-content>

    </mat-card>

  </div>

</div>